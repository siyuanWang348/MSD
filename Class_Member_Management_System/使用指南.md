# 班级成员管理系统使用指南

## 系统概述

班级成员管理系统是一个基于Web的应用程序，用于管理和维护班级成员信息。系统采用前后端分离架构，前端使用HTML、CSS和JavaScript，后端使用Node.js和Express框架，数据库采用SQLite。

## 系统功能

### 主要功能模块：

1. **用户认证系统**
   - 用户注册
   - 用户登录
   - 用户权限管理

2. **学生信息管理**
   - 添加学生信息
   - 查看学生列表
   - 编辑学生信息
   - 删除学生信息
   - 搜索学生

3. **班级管理**
   - 按班级分类查看学生
   - 班级信息维护

## 系统安装与运行

### 环境要求

- Node.js (版本 12 或更高)
- npm (通常随 Node.js 一起安装)

### 安装步骤

1. 进入后端目录：
   ```
   cd backend
   ```

2. 安装依赖包：
   ```
   npm install
   ```

3. 初始化数据库（可选，系统会自动创建数据库和表结构）：
   ```
   node init-db.js
   ```

4. 启动服务器：
   ```
   node server.js
   ```

5. 打开浏览器访问：
   ```
   http://localhost:8080
   ```

### 默认账户

系统内置了一个默认管理员账户，可以用于首次登录：

- 用户名：admin
- 密码：admin123

此外，初始化脚本还会创建以下示例账户和数据：

**教师账户：**
- 用户名：teacher1，密码：teacher123
- 用户名：teacher2，密码：teacher456

**示例学生数据：**
- 张三，学号：2021001，班级：一班
- 李四，学号：2021002，班级：一班
- 王五，学号：2021003，班级：二班
- 赵六，学号：2021004，班级：二班
- 钱七，学号：2021005，班级：三班

## 系统使用说明

### 1. 登录系统

1. 打开浏览器访问 `http://localhost:8080`
2. 在登录页面输入用户名和密码
3. 点击"登录"按钮进入系统

### 2. 注册新用户

1. 在登录页面点击"立即注册"链接
2. 填写用户名、密码和选择角色
3. 点击"注册"按钮完成注册
4. 注册成功后会自动跳转到登录页面

### 3. 仪表板

登录成功后会进入仪表板页面，这里显示了系统的概览信息。

### 4. 学生管理

#### 查看学生列表
- 点击左侧导航栏的"学生管理"->"学生列表"
- 可以按班级筛选学生
- 支持搜索功能

#### 添加学生
1. 点击左侧导航栏的"学生管理"->"添加学生"
2. 填写学生信息：
   - 学号（唯一标识）
   - 姓名
   - 班级
   - 性别
   - 电话号码
   - 邮箱（可选）
   - 地址（可选）
3. 点击"添加学生"按钮

#### 编辑学生信息
1. 在学生列表中找到要编辑的学生
2. 点击"编辑"按钮
3. 修改相关信息
4. 点击"更新"按钮保存更改

#### 删除学生
1. 在学生列表中找到要删除的学生
2. 点击"删除"按钮
3. 确认删除操作

## 技术架构

### 前端技术栈
- HTML5
- CSS3/Tailwind CSS
- JavaScript (ES6+)
- Font Awesome 图标库

### 后端技术栈
- Node.js
- Express.js
- SQLite 数据库
- JWT 认证

### 目录结构

```
class-member-management-system/
├── backend/                          # 后端代码
│   ├── config/                       # 配置文件
│   │   └── db.js                     # 数据库配置文件
│   ├── controllers/                  # 控制器文件
│   │   ├── authController.js         # 认证相关控制器
│   │   └── studentController.js      # 学生管理相关控制器
│   ├── database/                     # 数据库文件
│   │   └── classSystem.db            # SQLite数据库文件
│   ├── middleware/                   # 中间件
│   │   └── auth.js                   # 认证中间件
│   ├── node_modules/                 # Node.js依赖包
│   ├── routes/                       # 路由文件
│   │   ├── authRoutes.js             # 认证相关路由
│   │   └── studentRoutes.js          # 学生管理相关路由
│   ├── package.json                  # Node.js包配置文件
│   ├── package-lock.json             # Node.js包锁定文件
│   └── server.js                     # 服务器入口文件
└── frontend/                         # 前端代码
    ├── js/                           # JavaScript文件
    │   ├── auth.js                   # 认证相关功能
    │   ├── main.js                   # 主要功能和全局函数
    │   └── students.js               # 学生管理相关功能
    └── pages/                        # HTML页面文件
        ├── add-student.html          # 添加学生页面
        ├── dashboard.html            # 仪表板页面
        ├── index.html                # 登录页面
        ├── register.html             # 注册页面
        └── students.html             # 学生列表页面
```

## API 接口文档

### 认证接口

#### 用户注册
- URL: `/api/auth/register`
- 方法: POST
- 参数:
  - username: 用户名
  - password: 密码
  - role: 角色 (teacher 或 admin)

#### 用户登录
- URL: `/api/auth/login`
- 方法: POST
- 参数:
  - username: 用户名
  - password: 密码

#### 获取当前用户信息
- URL: `/api/auth/me`
- 方法: GET

### 学生管理接口

#### 获取所有学生
- URL: `/api/students[?class={className}]`
- 方法: GET
- 参数: class (可选，按班级筛选)

#### 获取单个学生
- URL: `/api/students/{id}`
- 方法: GET

#### 创建学生
- URL: `/api/students`
- 方法: POST
- 参数:
  - idNumber: 学号
  - name: 姓名
  - className: 班级
  - gender: 性别
  - phone: 电话
  - email: 邮箱（可选）
  - address: 地址（可选）

#### 更新学生信息
- URL: `/api/students/{id}`
- 方法: PUT
- 参数: 同创建学生

#### 删除学生
- URL: `/api/students/{id}`
- 方法: DELETE

#### 搜索学生
- URL: `/api/students/search/{query}`
- 方法: GET

## 注意事项

1. 系统默认运行在 8080 端口，如需修改可在 [backend/server.js](file:///c%3A/Users/28247/Desktop/class-member-management-system/backend/server.js) 文件中修改 PORT 变量
2. 数据库存储在 [backend/database/classSystem.db](file:///c%3A/Users/28247/Desktop/class-member-management-system/backend/database/classSystem.db) 文件中
3. 生产环境中应修改 JWT 密钥，位于控制器文件中
4. 密码在当前版本中明文存储，生产环境应使用加密存储

## 数据库管理

系统使用 SQLite 数据库存储用户和学生信息。数据库文件位于 [backend/database/classSystem.db](file:///c%3A/Users/28247/Desktop/class-member-management-system/backend/database/classSystem.db)。

### 数据库结构

#### 用户表 (users)
- id: 用户唯一标识符 (TEXT, 主键)
- username: 用户名 (TEXT, 唯一且不为空)
- password: 密码 (TEXT, 不为空)
- role: 用户角色 (TEXT, 不为空) - 可选值: admin, teacher
- createdAt: 创建时间 (TEXT, 不为空)

#### 学生表 (students)
- id: 学生唯一标识符 (TEXT, 主键)
- idNumber: 学号 (TEXT, 唯一且不为空)
- name: 姓名 (TEXT, 不为空)
- className: 班级名称 (TEXT, 不为空)
- gender: 性别 (TEXT, 不为空)
- phone: 电话号码 (TEXT, 不为空)
- email: 邮箱 (TEXT, 可为空)
- address: 地址 (TEXT, 可为空)
- createdAt: 创建时间 (TEXT, 不为空)
- updatedAt: 更新时间 (TEXT, 不为空)

### 数据库初始化

系统会在首次启动时自动创建数据库和表结构。如果需要手动初始化或重新初始化数据库，可以运行以下命令：

```
cd backend
node init-db.js
```

此脚本会创建必要的表结构并插入示例数据，包括管理员账户、教师账户和示例学生数据。

## 故障排除

### 常见问题

1. **无法启动服务器**
   - 检查是否已安装 Node.js 和 npm
   - 确认所有依赖包已正确安装

2. **页面无法访问**
   - 检查服务器是否正在运行
   - 确认端口号是否正确

3. **数据库连接错误**
   - 检查 [backend/database/](file:///c%3A/Users/28247/Desktop/class-member-management-system/backend/database/) 目录是否存在且有读写权限

### 技术支持

如有其他问题，请联系系统开发者。